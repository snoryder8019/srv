# Module Update Template

Use this template when updating the context configuration for any module.

## Adding a New Module

```json
"service-name": {
  "name": "Full Service Name",
  "path": "/srv/service-name",
  "port": 3XXX,
  "domain": "domain.com",
  "tmuxSession": "service_session",
  "description": "Brief description of what this service does",
  "technology": ["List", "of", "technologies"],
  "authentication": "Auth method (if applicable)",
  "database": {
    "type": "Database type",
    "name": "Database name",
    "collections": ["list", "of", "collections"]
  },
  "features": [
    "List of key features",
    "One per line"
  ],
  "documentation": [
    "/path/to/docs.md"
  ],
  "keyFiles": {
    "server": "/path/to/main/file.js",
    "routes": "/path/to/routes/",
    "models": "/path/to/models/"
  }
}
```

## Updating Existing Module

### Adding New Features

1. Update the module's section in `.claude-context.json`
2. Add to `features` array
3. If major feature, add to `newFeatures` object:

```json
"newFeatures": {
  "featureName": {
    "description": "What this feature does",
    "features": ["Sub-feature 1", "Sub-feature 2"],
    "files": ["/path/to/file1.js", "/path/to/file2.js"]
  }
}
```

4. Add documentation files to `documentation` array
5. Update `recentChanges` in root of context file

### Recording Recent Changes

```json
{
  "date": "YYYY-MM-DD",
  "module": "service-name",
  "description": "Brief description of what changed"
}
```

## Cross-Module Integration

When a feature spans multiple modules:

```json
"crossModuleFeatures": {
  "featureName": {
    "description": "What this integration does",
    "implementations": [
      {
        "name": "Implementation Name",
        "location": "/path/or/url",
        "features": ["What it does"]
      }
    ]
  }
}
```

## Documentation Standards

### Service README Template

Each service should have:

```markdown
# Service Name

## Overview
Brief description

## Features
- Feature 1
- Feature 2

## Installation
How to set up

## Configuration
Environment variables, etc.

## API Endpoints (if applicable)
List of endpoints

## Usage
How to use

## Files
Key files and their purposes

## Integration
How it integrates with other services

## Troubleshooting
Common issues
```

### Creating Module Documentation

1. Create README.md in service directory
2. Update `.claude-context.json` with documentation path
3. Add to `/srv/README.md` if it's a new service
4. Document in cross-module features if it integrates with others

## Checklist for New Service

- [ ] Service directory created in `/srv/`
- [ ] package.json with correct scripts
- [ ] .env file with required variables
- [ ] README.md documenting the service
- [ ] Added to `.claude-context.json`
- [ ] Added to `/srv/README.md` services table
- [ ] Tmux session name follows convention
- [ ] Port number documented and unique
- [ ] Apache virtual host created (if needed)
- [ ] SSL certificate obtained (if public)
- [ ] Added to monitoring systems:
  - [ ] `/srv/madladslab/lib/systemMonitor.js`
  - [ ] `/srv/servers/server.js` SERVICES array
- [ ] Tested startup and shutdown
- [ ] Integration documented if connects to other services

## Example: Recent Addition (Servers Dashboard)

See `.claude-context.json` for complete example:

1. Created new service entry under "services"
2. Documented all features, tech stack, authentication
3. Added integration section showing connection to madladslab
4. Created documentation files (README.md, DEPLOYMENT_SUMMARY.md)
5. Added to crossModuleFeatures (admin links, service monitoring)
6. Recorded in recentChanges with date and description
7. Updated madladslab footer integration

## Best Practices

1. **Always update context first** before coding
2. **Document as you go** - don't leave it for later
3. **Cross-reference** - note integrations between modules
4. **Version documentation** - use recentChanges to track
5. **Be specific** - include file paths, line numbers when relevant
6. **Test references** - verify all paths in context file are correct

## Updating This Template

When you find better ways to organize module documentation:

1. Update this template
2. Apply to `.claude-context.json`
3. Note the change in `recentChanges`
4. Update existing modules to follow new pattern (if feasible)
