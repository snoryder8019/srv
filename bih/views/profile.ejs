<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Profile - bih</title>
  <link rel="stylesheet" href="/css/theme.css">
  <link rel="stylesheet" href="/css/chat.css">
  <link rel="stylesheet" href="/css/sidebar.css">
  <link rel="stylesheet" href="/css/call.css">
</head>
<body>
  <h1>Profile</h1>

  <% if (success) { %>
    <p style="color: #00ff41;">> <%= success %></p>
  <% } %>
  <% if (error) { %>
    <p style="color: #ff3333;">> <%= error %></p>
  <% } %>

  <div style="margin: 16px 0;">
    <% if (user.avatar) { %>
      <img src="<%= user.avatar %>" alt="avatar" width="80" style="border-radius:50%; border:1px solid #1a3a1a;" />
    <% } else { %>
      <div style="width:80px;height:80px;border-radius:50%;border:1px solid #1a3a1a;display:flex;align-items:center;justify-content:center;color:#1a5a1a;font-size:28px;">?</div>
    <% } %>
  </div>

  <p style="color:#00aa2a; margin-bottom:16px;"><%= user.email %></p>

  <hr>

  <h2 style="margin:16px 0 8px;">Update Display Name</h2>
  <form action="/profile/update-name" method="POST">
    <input type="text" name="displayName" value="<%= user.displayName || '' %>" placeholder="Display Name" required />
    <button type="submit">Save Name</button>
  </form>

  <hr>

  <h2 style="margin:16px 0 8px;">Update Avatar</h2>
  <form action="/profile/update-avatar" method="POST" enctype="multipart/form-data">
    <input type="file" name="avatar" accept="image/*" required style="color:#00cc33;" />
    <button type="submit">Upload Avatar</button>
  </form>

  <hr>

  <h2 style="margin:16px 0 8px;">Gaming &amp; Streaming</h2>
  <form action="/profile/update-ids" method="POST">
    <label style="display:block; margin-bottom:4px; color:#1a5a1a;">Epic Games ID</label>
    <input type="text" name="epicId" value="<%= user.epicId || '' %>" placeholder="Epic Games username" />

    <label style="display:block; margin:12px 0 4px; color:#1a5a1a;">Twitch ID</label>
    <input type="text" name="twitchId" value="<%= user.twitchId || '' %>" placeholder="Twitch username" />

    <div style="margin-top:8px;">
      <button type="submit">Save IDs</button>
    </div>
  </form>

  <hr>
  <div style="margin-top:16px;">
    <a href="/dashboard">Dashboard</a>
    <a href="/" style="margin-left:16px;">Home</a>
  </div>

  <%- include('partials/sidebar') %>
  <%- include('partials/chat') %>
  <%- include('partials/call') %>
</body>
</html>
