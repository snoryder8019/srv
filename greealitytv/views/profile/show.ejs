<%- include('../partials/head', { title: profileUser.displayName }) %>
<%- include('../partials/nav') %>
<main class="page-main">
  <div class="profile-header">
    <% if (profileUser.avatar) { %><img src="<%= profileUser.avatar %>" class="profile-avatar"><% } %>
    <div class="profile-info">
      <h1><%= profileUser.displayName %></h1>
      <% if (profileUser.isAdmin) { %><span class="admin-badge">Admin</span><% } %>
      <% if (profileUser.bio) { %><p class="profile-bio"><%= profileUser.bio %></p><% } %>
      <span class="profile-joined">Member since <%= new Date(profileUser.createdAt).toLocaleDateString('en-US', { month: 'long', year: 'numeric' }) %></span>
    </div>
  </div>

  <% if (posts.length) { %>
    <h3>Articles by <%= profileUser.displayName %></h3>
    <div class="card-grid">
      <% posts.forEach(post => { %>
        <article class="card">
          <% if (post.coverImage) { %><div class="card-img" style="background-image:url('<%= post.coverImage %>')"></div><% } else { %><div class="card-img card-img-placeholder"></div><% } %>
          <div class="card-body">
            <h3 class="card-title"><a href="/posts/<%= post._id %>"><%= post.title %></a></h3>
            <p class="card-excerpt"><%= post.excerpt || '' %></p>
          </div>
        </article>
      <% }) %>
    </div>
  <% } %>

  <% if (videos.length) { %>
    <h3 style="margin-top:2rem">Videos by <%= profileUser.displayName %></h3>
    <div class="video-grid">
      <% videos.forEach(v => { %>
        <div class="video-card">
          <a href="/videos/<%= v._id %>" class="video-thumb">
            <% if (v.thumbnail) { %><img src="<%= v.thumbnail %>" alt="<%= v.title %>"><% } else { %><div class="video-thumb-placeholder">▶</div><% } %>
            <div class="play-overlay">▶</div>
          </a>
          <div class="video-info"><h4><a href="/videos/<%= v._id %>"><%= v.title %></a></h4></div>
        </div>
      <% }) %>
    </div>
  <% } %>
</main>
<%- include('../partials/footer') %>
