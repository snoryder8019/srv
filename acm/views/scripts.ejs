<script>
document.addEventListener("DOMContentLoaded", () => {
    const mainDivs = document.querySelectorAll(".mainDiv");
    const navButtons = document.querySelectorAll(".navButton");
    const sectionContents = document.querySelectorAll(".sectionContent");

    // Update nav dot active state
    function updateNavButtons(activeIndex) {
        navButtons.forEach((btn, index) => {
            btn.classList.toggle("active", index === activeIndex);
        });
    }

    // Intersection Observer for nav dots + fade-in animations
    const observer = new IntersectionObserver(
        (entries) => {
            entries.forEach((entry) => {
                const index = [...mainDivs].indexOf(entry.target);
                const content = entry.target.querySelector(".sectionContent");

                if (entry.isIntersecting) {
                    updateNavButtons(index);
                    if (content) content.classList.add("visible");
                }
            });
        },
        { threshold: 0.5 }
    );

    mainDivs.forEach((div) => observer.observe(div));

    // Click nav dots to scroll to section
    navButtons.forEach((btn, index) => {
        btn.addEventListener("click", () => {
            mainDivs[index].scrollIntoView({ behavior: "smooth" });
        });
    });

    // Make first section visible immediately
    const firstContent = mainDivs[0] && mainDivs[0].querySelector(".sectionContent");
    if (firstContent) firstContent.classList.add("visible");
    updateNavButtons(0);
});
</script>
