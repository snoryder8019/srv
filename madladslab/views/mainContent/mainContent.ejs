<%-include('./header.ejs')%>
<%-include('./socialIconBar.ejs')%>

<h1 class="accent textDepth">madLadsLab</h1>
<p class="introText">Building the future of game development, enterprise automation, and AI integration.</p>

<div class="contentScroll">

    <div class="contentBox">
        <img src="https://picsum.photos/seed/stringborne/400/200" alt="Stringborne" style="width: 100%; height: 180px; object-fit: cover; border-radius: 4px; margin-bottom: 1rem;">
        <h3 class="accent textDepth">Stringborne</h3>
        <p>Browser-based 3D galactic mapping and travel roguelike with side-scroller style crawlers. Explore vast galaxies, navigate procedurally generated worlds, and engage in intense combat across multiple game modes.</p>
        <ul class="accent textDepth">
            <li>3D galactic mapping & navigation system</li>
            <li>Roguelike space travel mechanics</li>
            <li>Side-scroller dungeon crawlers</li>
            <li>Real-time multiplayer framework</li>
            <li>Currently in active testing phase</li>
        </ul>
        <a href="https://ps.madladslab.com" target="_blank" class="ctaButton" style="display: inline-block; margin-top: 1rem; padding: 0.75rem 1.5rem; background: var(--accent); color: #000; text-decoration: none; border-radius: 4px; font-weight: bold;">Become a Tester Today</a>
    </div>

    <div class="contentBox">
        <img src="https://picsum.photos/seed/backoffice/400/200" alt="Backoffice App" style="width: 100%; height: 180px; object-fit: cover; border-radius: 4px; margin-bottom: 1rem;">
        <h3 class="accent textDepth">Backoffice App</h3>
        <p>Comprehensive enterprise management suite for business operations, analytics, and automation. Streamline your workflow with our all-in-one admin platform.</p>
        <ul class="accent textDepth">
            <li>Real-time dashboard analytics</li>
            <li>User & role management</li>
            <li>Database admin tools</li>
            <li>System monitoring & logs</li>
            <li>API endpoint management</li>
            <li>Automated reporting</li>
        </ul>
        <a href="/backoffice" class="ctaButton" style="display: inline-block; margin-top: 1rem; padding: 0.75rem 1.5rem; background: var(--accent); color: #000; text-decoration: none; border-radius: 4px; font-weight: bold;">Learn More</a>
    </div>

    <div class="contentBox">
        <img src="https://picsum.photos/seed/mcpapis/400/200" alt="MCPs & APIs" style="width: 100%; height: 180px; object-fit: cover; border-radius: 4px; margin-bottom: 1rem;">
        <h3 class="accent textDepth">MCPs & APIs</h3>
        <p>Model Context Protocol servers and production-ready APIs for AI integration, geospatial services, payment processing, and real-time communication.</p>
        <ul class="accent textDepth">
            <li>Claude AI integration with MCP</li>
            <li>RESTful & WebSocket APIs</li>
            <li>Geospatial engagement platform</li>
            <li>Payment gateway (crypto + fiat)</li>
            <li>Authentication & session management</li>
            <li>Real-time multiplayer infrastructure</li>
        </ul>
        <button onclick="openMcpLightbox()" class="ctaButton" style="display: inline-block; margin-top: 1rem; padding: 0.75rem 1.5rem; background: var(--accent); color: #000; border: none; border-radius: 4px; font-weight: bold; cursor: pointer;">Learn More</button>
    </div>

    <div class="contentBox">
        <img src="https://picsum.photos/seed/scrapeman/400/200" alt="ScapeMan Web Scraper" style="width: 100%; height: 180px; object-fit: cover; border-radius: 4px; margin-bottom: 1rem;">
        <h3 class="accent textDepth">ScapeMan Web Scraper</h3>
        <p>Advanced web scraping and data extraction utility for developers and automation workflows. Extract structured data, analyze content, and discover assets across local applications.</p>
        <ul class="accent textDepth">
            <li>Extract metadata, content, links & images</li>
            <li>Custom CSS selector-based extraction</li>
            <li>SEO, accessibility & performance analysis</li>
            <li>Local apps browser & asset discovery</li>
            <li>Image download & management tools</li>
            <li>JSON export & clipboard integration</li>
        </ul>
        <button onclick="openScapemanLightbox()" class="ctaButton" style="display: inline-block; margin-top: 1rem; padding: 0.75rem 1.5rem; background: var(--accent); color: #000; border: none; border-radius: 4px; font-weight: bold; cursor: pointer;">Learn More</button>
    </div>

</div>

<div style="margin: 2rem 0;">
    <h3 class="accent textDepth">Technology Stack</h3>
    <p class="introText">Node.js/Express + MongoDB + Socket.io + Three.js + Anthropic Claude. Cloud-native architecture with containerized services, real-time monitoring, and enterprise-grade security.</p>
</div>

<!-- MCP & API Lightbox -->
<div id="mcpLightbox" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.85); z-index: 10000; justify-content: center; align-items: center;">
    <div style="background: #1a1a1a; border: 2px solid var(--accent); border-radius: 8px; max-width: 800px; max-height: 90vh; overflow-y: auto; padding: 2rem; margin: 2rem; position: relative;">
        <button onclick="closeMcpLightbox()" style="position: absolute; top: 1rem; right: 1rem; background: transparent; border: none; color: var(--accent); font-size: 2rem; cursor: pointer; line-height: 1;">&times;</button>

        <h2 class="accent textDepth" style="margin-top: 0;">What are MCPs & APIs?</h2>

        <div style="margin: 1.5rem 0;">
            <h3 class="accent textDepth">Model Context Protocol (MCP)</h3>
            <p>MCPs are intelligent connectors that allow AI assistants like Claude to interact with your data, tools, and services in real-time. Think of them as bridges between AI and your business systems.</p>
            <ul class="accent textDepth">
                <li><strong>Real-time Data Access:</strong> Claude can query your databases, files, and APIs on-demand</li>
                <li><strong>Context-Aware Responses:</strong> Provide AI with live business data for accurate, up-to-date answers</li>
                <li><strong>Secure Integration:</strong> Controlled access with authentication and permission management</li>
                <li><strong>Custom Workflows:</strong> Build AI-powered automation tailored to your business needs</li>
            </ul>
        </div>

        <div style="margin: 1.5rem 0;">
            <h3 class="accent textDepth">Our APIs</h3>
            <p>Production-ready REST and WebSocket APIs that power modern applications with real-time capabilities.</p>
            <ul class="accent textDepth">
                <li><strong>Geospatial Services:</strong> Location-based features, GPS tracking, proximity detection</li>
                <li><strong>Payment Processing:</strong> Accept crypto and fiat payments with unified API</li>
                <li><strong>Real-time Communication:</strong> WebSocket infrastructure for multiplayer and live updates</li>
                <li><strong>AI Integration:</strong> Claude API endpoints with session management and voice I/O</li>
                <li><strong>Authentication:</strong> Secure user management with OAuth, JWT, and session handling</li>
            </ul>
        </div>

        <div style="margin: 1.5rem 0; padding: 1.5rem; background: rgba(138, 79, 255, 0.1); border-left: 4px solid var(--accent); border-radius: 4px;">
            <h3 class="accent textDepth" style="margin-top: 0;">How This Helps You</h3>
            <p><strong>For Businesses:</strong> Automate customer support, integrate AI into your workflows, process payments seamlessly, and build engaging location-based experiences.</p>
            <p><strong>For Developers:</strong> Skip the infrastructure headaches. Use our battle-tested APIs to add advanced features to your apps in hours, not months.</p>
            <p><strong>For End Users:</strong> Experience faster, smarter applications with AI-powered features, real-time updates, and seamless interactions.</p>
        </div>

        <div style="text-align: center; margin-top: 2rem;">
            <p style="color: var(--accent); font-weight: bold;">Want to integrate these into your project?</p>
            <a href="mailto:scott@madladslab.com" style="display: inline-block; margin-top: 1rem; padding: 0.75rem 2rem; background: var(--accent); color: #000; text-decoration: none; border-radius: 4px; font-weight: bold;">Get in Touch</a>
        </div>
    </div>
</div>

<!-- ScapeMan Lightbox -->
<div id="scapemanLightbox" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.85); z-index: 10000; justify-content: center; align-items: center;">
    <div style="background: #1a1a1a; border: 2px solid var(--accent); border-radius: 8px; max-width: 800px; max-height: 90vh; overflow-y: auto; padding: 2rem; margin: 2rem; position: relative;">
        <button onclick="closeScapemanLightbox()" style="position: absolute; top: 1rem; right: 1rem; background: transparent; border: none; color: var(--accent); font-size: 2rem; cursor: pointer; line-height: 1;">&times;</button>

        <h2 class="accent textDepth" style="margin-top: 0;">What is ScapeMan?</h2>

        <div style="margin: 1.5rem 0;">
            <h3 class="accent textDepth">Advanced Web Scraping Utility</h3>
            <p>ScapeMan is a powerful web scraping and data extraction tool built for developers, researchers, and automation workflows. Extract structured data from any website with precision and ease.</p>
            <ul class="accent textDepth">
                <li><strong>Quick Scrape:</strong> Extract metadata, content, links, and images from any URL</li>
                <li><strong>Custom Extraction:</strong> Use CSS selectors to target specific data elements</li>
                <li><strong>Content Analysis:</strong> Automated SEO, accessibility, and performance audits</li>
                <li><strong>Local Asset Discovery:</strong> Browse and extract assets from all local /srv applications</li>
                <li><strong>Image Management:</strong> Download and save scraped images automatically</li>
            </ul>
        </div>

        <div style="margin: 1.5rem 0;">
            <h3 class="accent textDepth">Key Features</h3>
            <ul class="accent textDepth">
                <li><strong>Intelligent Parsing:</strong> Cheerio-powered HTML parsing with metadata extraction</li>
                <li><strong>Flexible Options:</strong> Toggle metadata, content, links, and images on/off</li>
                <li><strong>Export Options:</strong> Copy to clipboard or download as JSON</li>
                <li><strong>Multi-Format Results:</strong> View raw data, formatted text, or metadata tabs</li>
                <li><strong>Security First:</strong> URL validation, timeout protection, and admin-only access</li>
            </ul>
        </div>

        <div style="margin: 1.5rem 0; padding: 1.5rem; background: rgba(138, 79, 255, 0.1); border-left: 4px solid var(--accent); border-radius: 4px;">
            <h3 class="accent textDepth" style="margin-top: 0;">How This Helps You</h3>
            <p><strong>For Developers:</strong> Quickly extract data for testing, documentation, or integration without writing scraper code from scratch.</p>
            <p><strong>For Content Creators:</strong> Analyze competitor websites, extract structured content, and audit SEO performance.</p>
            <p><strong>For Researchers:</strong> Gather data from multiple sources efficiently with custom CSS selectors and automated exports.</p>
        </div>

        <div style="text-align: center; margin-top: 2rem;">
            <p style="color: var(--accent); font-weight: bold;">Ready to start scraping?</p>
            <a href="/scrapeman" style="display: inline-block; margin-top: 1rem; padding: 0.75rem 2rem; background: var(--accent); color: #000; text-decoration: none; border-radius: 4px; font-weight: bold;">Go to ScapeMan</a>
        </div>
    </div>
</div>

<script>
function openMcpLightbox() {
    document.getElementById('mcpLightbox').style.display = 'flex';
    document.body.style.overflow = 'hidden';
}

function closeMcpLightbox() {
    document.getElementById('mcpLightbox').style.display = 'none';
    document.body.style.overflow = 'auto';
}

function openScapemanLightbox() {
    document.getElementById('scapemanLightbox').style.display = 'flex';
    document.body.style.overflow = 'hidden';
}

function closeScapemanLightbox() {
    document.getElementById('scapemanLightbox').style.display = 'none';
    document.body.style.overflow = 'auto';
}

// Close on ESC key
document.addEventListener('keydown', function(e) {
    if (e.key === 'Escape') {
        closeMcpLightbox();
        closeScapemanLightbox();
    }
});

// Close on background click
document.getElementById('mcpLightbox').addEventListener('click', function(e) {
    if (e.target === this) {
        closeMcpLightbox();
    }
});

document.getElementById('scapemanLightbox').addEventListener('click', function(e) {
    if (e.target === this) {
        closeScapemanLightbox();
    }
});

// ===== SCRAPEMAN GALLERY =====
let scrapedImages = [];
let currentShuffleIndex = 0;
const IMAGES_TO_SHOW = 8;
const SHUFFLE_INTERVAL = 5000; // 5 seconds

async function loadScrapedImages() {
    try {
        const response = await fetch('/scrapeman/api/scraped-images');
        const result = await response.json();

        if (result.success && result.images.length > 0) {
            scrapedImages = result.images;
            shuffleArray(scrapedImages);
            displayGalleryImages();
            setInterval(rotateGalleryImages, SHUFFLE_INTERVAL);
        } else {
            document.getElementById('scrapedImageGallery').innerHTML = `
                <div style="grid-column: 1 / -1; text-align: center; color: #888; padding: 2rem;">
                    No scraped images yet. <a href="/scrapeman" style="color: var(--accent);">Start scraping!</a>
                </div>
            `;
        }
    } catch (error) {
        console.error('Error loading scraped images:', error);
        document.getElementById('scrapedImageGallery').innerHTML = `
            <div style="grid-column: 1 / -1; text-align: center; color: #ff6666; padding: 2rem;">
                Error loading images
            </div>
        `;
    }
}

function shuffleArray(array) {
    for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
    }
}

function displayGalleryImages() {
    const gallery = document.getElementById('scrapedImageGallery');
    gallery.innerHTML = '';

    const imagesToShow = scrapedImages.slice(currentShuffleIndex, currentShuffleIndex + IMAGES_TO_SHOW);

    imagesToShow.forEach((img, index) => {
        const imgCard = document.createElement('div');
        imgCard.style.cssText = `
            position: relative;
            overflow: hidden;
            border-radius: 8px;
            border: 1px solid #444;
            background: rgba(0, 0, 0, 0.5);
            transition: all 0.3s;
            cursor: pointer;
            opacity: 0;
            animation: fadeIn 0.5s ease-in-out forwards;
            animation-delay: ${index * 0.1}s;
        `;

        imgCard.innerHTML = `
            <img src="${img.url}"
                 alt="${img.filename}"
                 style="width: 100%; height: 150px; object-fit: cover; display: block;"
                 onerror="this.parentElement.style.display='none'">
            <div style="
                position: absolute;
                bottom: 0;
                left: 0;
                right: 0;
                background: linear-gradient(transparent, rgba(0, 0, 0, 0.8));
                padding: 0.5rem;
                font-size: 0.7rem;
                color: #ccc;
                text-overflow: ellipsis;
                overflow: hidden;
                white-space: nowrap;
            ">${img.filename}</div>
        `;

        imgCard.addEventListener('mouseenter', function() {
            this.style.transform = 'scale(1.05)';
            this.style.borderColor = 'var(--accent)';
            this.style.boxShadow = '0 0 20px rgba(0, 255, 0, 0.3)';
        });

        imgCard.addEventListener('mouseleave', function() {
            this.style.transform = 'scale(1)';
            this.style.borderColor = '#444';
            this.style.boxShadow = 'none';
        });

        imgCard.addEventListener('click', function() {
            window.open(img.url, '_blank');
        });

        gallery.appendChild(imgCard);
    });
}

function rotateGalleryImages() {
    if (scrapedImages.length <= IMAGES_TO_SHOW) return;

    currentShuffleIndex += IMAGES_TO_SHOW;
    if (currentShuffleIndex >= scrapedImages.length) {
        currentShuffleIndex = 0;
        shuffleArray(scrapedImages);
    }

    displayGalleryImages();
}

// Add fade-in animation
const style = document.createElement('style');
style.textContent = `
    @keyframes fadeIn {
        from {
            opacity: 0;
            transform: translateY(20px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }
`;
document.head.appendChild(style);

// Load images on page load
document.addEventListener('DOMContentLoaded', loadScrapedImages);
</script>

<%-include('./adminNav.ejs')%>
</div>
