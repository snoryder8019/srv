<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title><%= title %></title>
  <link rel="stylesheet" href="/stylesheets/style.css">
  <link rel="stylesheet" href="/stylesheets/game-state-admin.css">
</head>
<body>
  <%- include('../partials/header', { user: user }) %>

  <div class="admin-container">
    <div class="admin-header">
      <h1>ðŸŽ® Game State Controls</h1>
      <p class="subtitle">Configure galactic simulation parameters</p>
    </div>

    <!-- Connection Status -->
    <div class="status-card" id="connectionStatus">
      <div class="status-indicator">
        <span class="dot"></span>
        <span class="status-text">Loading...</span>
      </div>
      <button id="restartBtn" class="btn btn-warning">Restart Simulation</button>
    </div>

    <!-- Current Configuration Display -->
    <div class="config-section">
      <h2>Current Configuration</h2>
      <div class="config-grid" id="currentConfig">
        <!-- Populated by JavaScript -->
      </div>
    </div>

    <!-- Map Configuration -->
    <div class="config-section">
      <h2>Map Configuration</h2>
      <div class="form-grid">
        <div class="form-group">
          <label for="mapWidth">Map Width</label>
          <input type="number" id="mapWidth" min="100" max="10000" value="1000">
          <span class="help-text">Grid width (100-10000)</span>
        </div>
        <div class="form-group">
          <label for="mapHeight">Map Height</label>
          <input type="number" id="mapHeight" min="100" max="10000" value="1000">
          <span class="help-text">Grid height (100-10000)</span>
        </div>
        <div class="form-group full-width">
          <div class="info-box">
            <strong>Total Zones:</strong> <span id="totalZones">1,000,000</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Timing Configuration -->
    <div class="config-section">
      <h2>Timing & Velocity</h2>
      <div class="form-grid">
        <div class="form-group">
          <label for="velocityUnit">Time Unit</label>
          <select id="velocityUnit">
            <option value="seconds">Seconds</option>
            <option value="minutes">Minutes</option>
            <option value="hours">Hours</option>
            <option value="days">Days</option>
          </select>
          <span class="help-text">Base time increment</span>
        </div>
        <div class="form-group">
          <label for="cycleSpeed">Cycle Speed Multiplier</label>
          <input type="number" id="cycleSpeed" min="0.1" max="100" step="0.1" value="1">
          <span class="help-text">Speed multiplier (0.1-100x)</span>
        </div>
        <div class="form-group full-width">
          <div class="info-box">
            <strong>Update Interval:</strong> <span id="updateInterval">30 seconds</span><br>
            <strong>Event Interval:</strong> <span id="eventInterval">2 minutes</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Simulation Parameters -->
    <div class="config-section">
      <h2>Simulation Parameters</h2>
      <div class="form-grid">
        <div class="form-group">
          <label for="resourceGrowth">Resource Growth Rate</label>
          <input type="number" id="resourceGrowth" min="0.1" max="10" step="0.1" value="1.0">
          <span class="help-text">Multiplier for resource generation</span>
        </div>
        <div class="form-group">
          <label for="discoveryRate">Discovery Rate</label>
          <input type="number" id="discoveryRate" min="0" max="1" step="0.1" value="0.7">
          <span class="help-text">Probability of discovering new zones (0-1)</span>
        </div>
        <div class="form-group">
          <label for="conflictProb">Conflict Probability</label>
          <input type="number" id="conflictProb" min="0" max="1" step="0.1" value="0.3">
          <span class="help-text">Chance of conflicts (0-1)</span>
        </div>
        <div class="form-group">
          <label for="initialZones">Initial Zones</label>
          <input type="number" id="initialZones" min="100" max="100000" step="100" value="500">
          <span class="help-text">Number of pre-generated zones</span>
        </div>
      </div>
    </div>

    <!-- Action Buttons -->
    <div class="action-buttons">
      <button id="saveBtn" class="btn btn-primary">ðŸ’¾ Save & Apply Configuration</button>
      <button id="resetBtn" class="btn btn-secondary">ðŸ”„ Reset to Defaults</button>
    </div>

    <!-- Log Output -->
    <div class="config-section">
      <h2>Activity Log</h2>
      <div class="log-output" id="logOutput">
        <p class="log-entry">System ready. Load configuration to begin.</p>
      </div>
    </div>
  </div>

  <%- include('../partials/footer') %>

  <script src="/javascripts/game-state-admin.js"></script>
</body>
</html>
